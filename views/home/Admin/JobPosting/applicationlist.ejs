<!-- job.ejs -->
<%- include('../../../_partials/dashboard/_header'); -%>
<%- include('../../../_partials/dashboard/_sidebar'); -%>

<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title" style="display: inline;">Job Applications</h4>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Actions</th>
                    <th>Job Id</th>
                    <th>Applicant Name</th>
                    <th>Email</th>
                    <th>Skill Set</th>
                    <th>Resume</th>
                  </tr>
                </thead>
                <tbody>
                  <% jobapp.forEach(job => { %>
                    <tr>
                      <td>
                        <form action="/jobapp/<%= job._id %>/delete" method="POST" style="display: inline;">
                          <button type="submit" class="badge badge-danger">Delete</button>
                        </form>
                      </td>
                      <td>
                        <%= job.jobid %>
                      </td>
                      <td>
                        <%= job.applicant_name %>
                      </td>
                      <td>
                        <%= job.applicant_email %>
                      </td>
                      <td>
                        <%= job.description %>
                      </td>
                      <td class="py-1">
                        <iframe src="../../images/<%= job.resume %>" frameborder="0"></iframe>
                      </td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>

            <% if (totalPages > 1) { %>
              <nav aria-label="Pagination">
                <ul class="pagination">
                  <% if (currentPage > 1) { %>
                    <li class="page-item">
                      <a class="page-link" href="/applicationlist?page=<%= currentPage - 1 %>">Previous</a>
                    </li>
                  <% } %>

                  <% for (let i = 1; i <= totalPages; i++) { %>
                    <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                      <a class="page-link" href="/applicationlist?page=<%= i %>"><%= i %></a>
                    </li>
                  <% } %>

                  <% if (currentPage < totalPages) { %>
                    <li class="page-item">
                      <a class="page-link" href="/applicationlist?page=<%= currentPage + 1 %>">Next</a>
                    </li>
                  <% } %>
                </ul>
              </nav>
            <% } %>
          </div>
        </div>
      </div>
      <%- include('../../../_partials/dashboard/_footer'); -%>
      <!-- partial -->
    </div>
    <!-- main-panel ends -->
  </div>
  <!-- page-body-wrapper ends -->
</div>
<script src="/dashboard/vendors/js/vendor.bundle.base.js"></script>
<script src="/dashboard/vendors/typeahead.js/typeahead.bundle.min.js"></script>
<script src="/dashboard/vendors/select2/select2.min.js"></script>
<script src="/dashboard/js/off-canvas.js"></script>
<script src="/dashboard/js/hoverable-collapse.js"></script>
<script src="/dashboard/js/template.js"></script>
<script src="/dashboard/js/settings.js"></script>
<script src="/dashboard/js/todolist.js"></script>
<!-- endinject -->
<!-- Custom js for this page-->
<script src="/dashboard/js/file-upload.js"></script>
<script src="/dashboard/js/typeahead.js"></script>
<script src="/dashboard/js/select2.js"></script>
<!-- End custom js for this page-->
</body>

</html>
